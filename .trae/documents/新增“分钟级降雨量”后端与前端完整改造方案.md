## 目标
- 在集成中为“分钟级降雨量（/v7/minutely/5m）”单独配置 API Host 与 API 密钥（Bearer）。
- 将分钟级降雨数据及按小时汇总（两小时）保存到 weather 实体属性中。
- 在 24 小时预报弹出卡右上方新增“雨量”按钮，打开“分钟级降雨量”弹窗：风格与 24 小时预报一致，但不显示空气质量；右上展示 summary；柱状图下方显示降水类型图标（rain→中雨.svg，snow→中雪.svg）。

## 后端改动
- 常量与属性
  - 在 [const.py](file:///d:/trea/天气/qweather/custom_components/qweather/const.py) 新增：
    - CONF_MINUTELY_HOST = "minutely_host"
    - CONF_MINUTELY_API_KEY = "minutely_api_key"
    - ATTR_MINUTELY_FORECAST = "minutely_forecast"
    - ATTR_MINUTELY_SUMMARY = "minutely_summary"
    - ATTR_MINUTELY_HOURLY = "minutely_hourly_rainfall"
- 配置界面
  - 在 [config_flow.py](file:///d:/trea/天气/qweather/custom_components/qweather/config_flow.py) 的“API 功能/选项”表单中新增两个字段：
    - 分钟级 API Host（CONF_MINUTELY_HOST），默认空；
    - 分钟级 API 密钥（CONF_MINUTELY_API_KEY），用于 Bearer；
  - 保留现有总开关（CONF_ENABLE_MINUTELY），以控制是否拉取分钟级数据。
- 数据抓取与模型
  - 在 [weather.py](file:///d:/trea/天气/qweather/custom_components/qweather/weather.py) 中：
    - 读取 CONF_MINUTELY_HOST 与 CONF_MINUTELY_API_KEY；构建 minutely_url 使用独立 Host：`https://{minutely_host}/v7/minutely/5m?location=...&lang=zh`。
    - 请求头对分钟接口使用 `Authorization: Bearer <token>`；其余接口保持现有 `X-QW-Api-Key`。
    - 新增 MinutelyForecast 数据类（fxTime、precip、type）。
    - WeatherData 增加 `_minutely_data`、`_minutely_forecast`、`_minutely_summary`，并在 `state_attributes` 暴露为 ATTR_MINUTELY_FORECAST、ATTR_MINUTELY_SUMMARY。
    - 计算“每小时雨量”（两小时）：将 5 分钟降水量按时间戳归并到各小时并求和，暴露为 ATTR_MINUTELY_HOURLY（数组，元素含 hour 与 total_precip）。
    - 异常与 gzip：aiohttp 默认支持 gzip；保留现有超时与错误处理逻辑。

## 前端改动（weather-card.js）
- 新按钮
  - 在右上 `weather-right-buttons` 容器处（参考 [weather-card.js](file:///d:/trea/天气/qweather/custom_components/qweather/www/weather-card.js)）新增“雨量”按钮，样式与“小时”一致，点击触发 `_toggleMinutelyModal()`。
- 新弹窗
  - 新增状态 `this._showMinutely` 与切换方法 `_toggleMinutelyModal()`；渲染与 24h 弹窗结构一致：
    - 头部标题“分钟级降雨量”；右上显示实体属性 ATTR_MINUTELY_SUMMARY 文本；无空气质量块。
    - 主体显示 5 分钟降水量柱状图（X 轴为 fxTime；Y 为 precip 毫米），数据来源 ATTR_MINUTELY_FORECAST。
    - 柱状图下方区域显示降水类型图标：type=="rain" 显示 [中雨.svg](file:///d:/trea/天气/qweather/custom_components/qweather/www/icon/中雨.svg)，type=="snow" 显示 [中雪.svg](file:///d:/trea/天气/qweather/custom_components/qweather/www/icon/中雪.svg)。
    - 不显示“当前天气/风力”信息块；保证右上 summary 文本区域宽度充足（CSS 调整）。
- 复用风格与交互
  - 颜色、位置、关闭按钮、遮罩与现有“小时”弹窗一致。

## 数据绑定
- 卡片通过 `this.entity.attributes` 读取：
  - `minutely_forecast`（数组：[{datetime, precip, type}]）。
  - `minutely_summary`（字符串）。
  - `minutely_hourly_rainfall`（数组：[{hour, total_precip}]，可用于未来扩展）。

## 安全与兼容
- 分钟级接口仅使用独立 Bearer 密钥；不在日志中输出密钥；请求失败降级为空数据并记录 warning。
- 若未配置分钟 Host 或密钥，或 `enable_minutely=false`，前端隐藏“雨量”按钮。

## 验证
- 后端：在开发环境填入 `minutely_host=xxxxxx.re.qweatherapi.com` 与 Bearer 密钥，检查实体属性是否如期生成；确认每 10–60 分钟刷新逻辑未受影响。
- 前端：确认“雨量”按钮显示与点击；弹窗样式、summary 文本、柱状图数据与类型图标正确；无空气质量块；关闭交互正常。

## 交付
- 修改 const.py、config_flow.py、weather.py、weather-card.js；必要时补充 translations（en/zh-Hans）文案。
- 提供使用说明：在集成“选项”中开启分钟级，并填写独立 Host 与 Bearer 密钥。